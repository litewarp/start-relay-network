language: typescript
layer: application
stack: backend
tags:
  - postgraphile
  - graphql

tasks:
  dev:
    command: bun run src/index.ts
    options:
      persistent: true
      cache: false
    deps:
      - db-up

  db-up:
    command: docker compose up -d
    options:
      cache: false
      internal: true

  db-down:
    command: docker compose down
    options:
      cache: false
      internal: true

  reset:
    command: ./scripts/reset-db.sh
